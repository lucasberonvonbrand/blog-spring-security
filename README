# ğŸ“ Blog - Spring Security

Proyecto integrador del curso de **Spring Security** de TodoCode Academy. Implementa un blog con gestiÃ³n de posts, autores y usuarios, utilizando autenticaciÃ³n y autorizaciÃ³n robusta con JWT, OAuth2 y roles/permisos.

## ğŸš€ Componentes principales

- ğŸŸ¢ **blog-service**: GestiÃ³n de posts, autores y usuarios, con roles y permisos.
- ğŸŸ¢ **security**: ConfiguraciÃ³n de Spring Security con JWT y OAuth2 mediante GitHub.

## ğŸ§± Arquitectura general

- âœ… Spring Boot (Java 17)  
- âœ… Spring Security para autenticaciÃ³n y autorizaciÃ³n  
- âœ… JWT para sesiones stateless  
- âœ… Roles: `ADMIN`, `USER`, `AUTHOR`  
- âœ… Permisos: `CREATE`, `READ`, `UPDATE`, `DELETE`  
- âœ… OAuth2 con GitHub  
- âœ… ContraseÃ±as cifradas con BCrypt  
- âœ… Endpoints REST: `/api/posts`, `/api/authors`, `/api/users`, `/api/roles`, `/api/permissions`

## âš™ï¸ CÃ³mo ejecutar el proyecto

### Requisitos

- Java 17  
- Maven 3.9+  
- MySQL  
- Postman (opcional)

### Paso a paso

1ï¸âƒ£ Clonar el repositorio:  

```bash
git clone https://github.com/lucasberonvonbrand/blog-spring-security.git
cd blog-spring-security
```

2ï¸âƒ£ Configurar la base de datos MySQL:  

```sql
CREATE DATABASE blog;
mysql -u <usuario> -p blog < ./db/blog-dump.sql
```

3ï¸âƒ£ Definir variables de entorno:  

`SS_USER`, `SS_PASSWORD`, `BD_URL`, `BD_USER`, `BD_PASSWORD`, `PRIVATE_KEY`, `USER_GENERATOR`, `GITHUB_CLIENT_ID`, `GITHUB_CLIENT_SECRET`

4ï¸âƒ£ Levantar la aplicaciÃ³n:  

```bash
mvn spring-boot:run
```

## ğŸ” Endpoints protegidos

Los siguientes endpoints estÃ¡n protegidos segÃºn roles y permisos:  
`/api/posts`, `/api/authors`, `/api/users`, `/api/roles`, `/api/permissions`

## ğŸ“¬ ColecciÃ³n Postman

- Archivo: `postman/blog-collection.json`  
- Instrucciones: Abrir Postman â†’ Importar archivo â†’ Ejecutar requests

## ğŸ—„ï¸ Base de datos MySQL

- Archivo: `db/blog-dump.sql`  
- Crear base si no existe:  
```sql
CREATE DATABASE IF NOT EXISTS blog;
```
- Importar dump:  
```bash
mysql -u <usuario> -p blog < ./db/blog-dump.sql
```

## ğŸ“ Estructura del proyecto

```
blog-spring-security/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”œâ”€â”€ java/
â”‚   â”‚   â”‚   â””â”€â”€ com/example/blog/
â”‚   â”‚   â”‚       â”œâ”€â”€ controller/
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ AuthenticationController.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ AuthorController.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ PermissionController.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ PostController.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ RoleController.java
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ UserController.java
â”‚   â”‚   â”‚       â”œâ”€â”€ dto/
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ AuthLoginRequestDTO.java
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ AuthLoginResponseDTO.java
â”‚   â”‚   â”‚       â”œâ”€â”€ model/
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ Author.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ Permission.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ Post.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ Role.java
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ UserSec.java
â”‚   â”‚   â”‚       â”œâ”€â”€ repository/
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ IAuthorRepository.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ IPermissionRepository.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ IPostRepository.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ IRoleRepository.java
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ IUserRepository.java
â”‚   â”‚   â”‚       â”œâ”€â”€ security/
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”‚       â”‚   â”‚   â””â”€â”€ SecurityConfig.java
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ filter/
â”‚   â”‚   â”‚       â”‚       â””â”€â”€ JwtTokenValidator.java
â”‚   â”‚   â”‚       â”œâ”€â”€ service/
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ AuthorService.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ IAuthorService.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ IPermissionService.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ PermissionService.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ IPostService.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ PostService.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ IRoleService.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ RoleService.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ IUserService.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ UserDetailsServiceImp.java
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ UsersService.java
â”‚   â”‚   â”‚       â””â”€â”€ utils/
â”‚   â”‚   â”‚           â””â”€â”€ JwtUtils.java
â”‚   â”‚   â””â”€â”€ resources/
â”‚   â”‚       â””â”€â”€ application.properties
â”‚   â””â”€â”€ test/
â”‚       â””â”€â”€ java/
â”‚           â””â”€â”€ com/example/blog/
â”œâ”€â”€ db/
â”‚   â””â”€â”€ blog-dump.sql
â”œâ”€â”€ postman/
â”‚   â””â”€â”€ blog-collection.json
â”œâ”€â”€ BlogApplication.java
â”œâ”€â”€ pom.xml
â”œâ”€â”€ README.md
â””â”€â”€ .gitignore

```

## ğŸ‘¨â€ğŸ’» Autor

**Lucas Ruben Beron Von Brand**  
Proyecto realizado como parte del curso **Spring Security** de TodoCode Academy.

